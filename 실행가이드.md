# WordPress 자동 블로그 포스팅 시스템 실행 가이드

## 개요
이 시스템은 키워드를 기반으로 WordPress 블로그 포스트를 자동으로 생성하고 게시하는 Python 기반 애플리케이션입니다.

## 사전 요구사항

### 1. Python 환경
- Python 3.11 이상 필요
- Poetry 패키지 관리자 설치

### 2. WordPress 설정
- WordPress 사이트 관리자 권한
- REST API 활성화
- Application Password 또는 JWT 인증 설정

## 설치 방법

### 1. 의존성 설치
```bash
# Poetry를 사용한 설치 (권장)
poetry install

# 또는 pip를 사용한 설치
pip install -e .
```

### 2. 환경 설정
프로젝트 루트에 `.env` 파일을 생성하고 다음 정보를 입력하세요:

```env
# WordPress 설정
WP_BASE_URL=https://your-wordpress-site.com
WP_USERNAME=your_username
WP_PASSWORD=your_application_password

# OpenAI 설정 (콘텐츠 생성용)
OPENAI_API_KEY=your_openai_api_key

# 기타 설정
DATABASE_PATH=./data/posts.db
IMAGES_DIR=./images
LOGS_DIR=./logs
```

### 3. 데이터베이스 초기화
```bash
# Poetry 환경에서
poetry run python -c "from src.services.database_service import init_db; init_db()"

# 또는 직접 실행
python -c "from src.services.database_service import init_db; init_db()"
```

## 실행 방법

### 1. CLI를 통한 포스트 예약
```bash
# Poetry 환경에서
poetry run auto-writer post:schedule --topic "AI 기술 동향" --datetime "2025-01-01T09:00:00"

# 또는 직접 실행
python -m src.apps.cli.main post:schedule --topic "AI 기술 동향" --datetime "2025-01-01T09:00:00"
```

### 2. 웹 대시보드 실행
```bash
# Poetry 환경에서
poetry run python -m src.apps.api

# 또는 직접 실행
python -m src.apps.api
```

웹 대시보드는 기본적으로 `http://localhost:8000`에서 실행됩니다.

### 3. Docker를 사용한 실행
```bash
# Docker Compose로 전체 시스템 실행
docker-compose up -d

# 또는 Docker로 단독 실행
docker build -t auto-writer .
docker run -p 8000:8000 --env-file .env auto-writer
```

## 주요 CLI 명령어

### 포스트 관련
```bash
# 즉시 게시
auto-writer post:publish --topic "주제명"

# 임시 저장
auto-writer post:draft --topic "주제명"

# 예약 게시
auto-writer post:schedule --topic "주제명" --datetime "2025-01-01T09:00:00"

# 포스트 목록 조회
auto-writer post:list

# 특정 포스트 상태 확인
auto-writer post:status --id "post_id"
```

### 시스템 관리
```bash
# 시스템 상태 확인
auto-writer status

# 로그 조회
auto-writer logs --tail 50

# 데이터베이스 백업
auto-writer backup --path "./backup.db"
```

## 개발 및 테스트

### 개발 환경 설정
```bash
# 개발 의존성 설치
poetry install --with dev

# Pre-commit 훅 설치
poetry run pre-commit install
```

### 코드 품질 검사
```bash
# 코드 포매팅
poetry run black .

# 린팅
poetry run ruff check .

# 타입 체킹
poetry run mypy .
```

### 테스트 실행
```bash
# 전체 테스트 실행
poetry run pytest

# 커버리지와 함께 테스트 실행
poetry run pytest --cov=src --cov-report=html

# 특정 테스트 파일 실행
poetry run pytest tests/test_wp_client.py
```

## 디렉토리 구조

```
src/
├── apps/           # 애플리케이션 진입점
│   ├── cli/        # 명령행 인터페이스
│   └── api/        # 웹 API (FastAPI)
├── core/           # 핵심 설정 및 모델
├── generators/     # 콘텐츠 생성기
├── interfaces/     # 추상 인터페이스
├── quality/        # 품질 검사기
├── services/       # 비즈니스 로직 서비스
└── wp_client/      # WordPress API 클라이언트

data/              # 데이터베이스 파일
images/            # 생성된 이미지
logs/              # 로그 파일
runs/              # 실행 기록
```

## 트러블슈팅

### 일반적인 문제
1. **WordPress 연결 실패**: `.env` 파일의 WordPress 설정 확인
2. **OpenAI API 오류**: API 키와 사용량 한도 확인
3. **이미지 생성 실패**: Pillow 라이브러리와 시스템 이미지 코덱 확인

### 로그 확인
```bash
# 최근 로그 확인
tail -f logs/app.log

# 특정 날짜 로그 확인
grep "2025-01-01" logs/app.log
```

### 데이터베이스 문제
```bash
# 데이터베이스 재초기화 (주의: 모든 데이터 삭제됨)
rm data/posts.db
python -c "from src.services.database_service import init_db; init_db()"
```

## 추가 기능

### Tistory 마이그레이션
```bash
# Tistory에서 WordPress로 마이그레이션
auto-writer migrate:tistory --source "tistory_backup.xml" --target "wordpress"
```

### 다중 블로그 관리
여러 WordPress 사이트를 관리하려면 각각 다른 설정 파일을 사용하세요:
```bash
auto-writer --config blog1.env post:publish --topic "주제"
auto-writer --config blog2.env post:publish --topic "주제"
```

## 지원 및 문의
- 이슈 리포트: GitHub Issues
- 문서: 프로젝트 README.md 및 CLAUDE.md 참조